<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- meta "search-domain" used for google site search function google_search() -->
    <meta name="search-domain" value="">
    <link rel="stylesheet" type="text/css" href="/revbayes_tutorials/assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="/revbayes_tutorials/assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="/revbayes_tutorials/assets/css/tutorial.css" />
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
    <title>RevBayes Tutorials: Setting up an IDE to develop RevBayes</title>
  </head>
  <body>
    <div class="container">
      <nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a href="https://revbayes.github.io" class="pull-left">
        <img class="navbar-logo" src="/revbayes_tutorials/assets/img/aquabayes.png" alt="RevBayes logo" />
      </a>
      
      
      <a class="navbar-brand" href="/revbayes_tutorials/">Home</a>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

	
        <li><a href="/revbayes_tutorials/setup/">Setup</a></li>
        <li><a href="/revbayes_tutorials/developer/">Developer</a></li>
        <li><a href="/revbayes_tutorials/tutorials/">Tutorials</a></li>
        <li><a href="/revbayes_tutorials/workshops/">Workshops</a></li>
        
        
      </ul>
      <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form>
    </div>
  </div>
</nav>

<div class="row">
	<h1 class="maintitle">Setting up an IDE to develop RevBayes</h1>
	<h3 class="subtitle"></h3>
	<h4 class="maintitle">Will Pett, April Wright, Lyndon Coghill, Sebastian H&#246;hna, Wade Dismukes</h4>
</div>


<blockquote class="overview no-print" id="overview">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-9">
        <strong>Prerequisites</strong>
        <ul>
        
          <li>None</li>
        
        </ul>
    </div>
  </div>
</blockquote>

<blockquote class="tutorial_files no-print">
  <h2>Data files and scripts</h2>
  
</blockquote>
<hr />

<p>It is easiest to use an IDE to develop RevBayes. Some examples of IDEs are XCode, Eclipse Oxygen, or Netbeans. One could also use <a href="/revbayes_tutorials/developer/vim-config"><code class="highlighter-rouge">vim</code></a> or Sublime Text if they prefer to do so, and we provide some helpful hints in setting up your <code class="highlighter-rouge">vim</code> environment. However, there are a few steps that must be taken before setting up your IDE.</p>

<h3 id="getting-revbayes-and-cmake">Getting RevBayes and CMAKE</h3>

<p>If you do not have the RevBayes source code, you can do so by cloning the Github repository:</p>
<div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/revbayes/revbayes
</code></pre></div></div>

<p>Once this is done you can install RevBayes using CMake. If you do not have CMake installed, you can install CMake on the Mac using <a href="https://brew.sh/">homebrew</a> using the following <code class="highlighter-rouge">brew install cmake</code>.</p>

<p>To compile the RevBayes core using cmake, follow these instructions:</p>
<ol>
  <li>Change directories:<br />
<code class="highlighter-rouge">cd revbayes/projects/cmake</code></li>
  <li>Follow the instructions in the <code class="highlighter-rouge">README.txt</code> file <a href="https://github.com/revbayes/revbayes/tree/master/projects/cmake">(link)</a>.</li>
</ol>

<p>If you later commit changes to the RevBayes repository on GitHub, make sure you do not commit any of the files generated by the cmake compilation process in the <code class="highlighter-rouge">revbayes/projects/cmake</code> directory. A good way to ensure that such files and directories do not get committed by mistake is to create a copy of the ‘cmake’ directory outside of your local git copy of the revbayes code repository, so that all files produced by the compilation end up outside of the local git directory.</p>

<h1 class="section" id="setting-up-eclipse-for-revbayes-development">Setting up Eclipse for RevBayes development</h1>
<hr />
<p>Eclipse is a Java-based, cross-platform IDE with lots of nice features that make it convenient for RevBayes development. First, it’s cross-platform, and unlike Xcode, you can use any compiler you like (not just <code class="highlighter-rouge">clang</code>).</p>

<h2 id="prerequisites">Prerequisites</h2>
<ul>
  <li>To compile RevBayes using Eclipse, you must install <a href="https://cmake.org/install/">CMake</a> and its <a href="https://stackoverflow.com/questions/30668601/installing-cmake-command-line-tools-on-a-mac">command line tools</a>. This is very easy if you have <a href="https://brew.sh/">homebrew</a> installed (<code class="highlighter-rouge">brew install cmake</code>)</li>
  <li>You must also have a C++ compiler. If you are using a Mac, you can use <code class="highlighter-rouge">clang</code> (included with <a href="https://developer.apple.com/xcode/">XCode</a>), or you can install <a href="https://gcc.gnu.org/"><code class="highlighter-rouge">gcc</code></a> (e.g. via homebrew <code class="highlighter-rouge">brew install gcc</code>).</li>
</ul>

<h2 id="installing-eclipse-cdt">Installing Eclipse CDT</h2>
<p>To start writing C++ in Eclipse, you must obtain the Eclipse CDT (C/C++ Development Tooling) package. You can download a distribution of Eclipse that comes prepackaged with CDT from the <a href="https://cmake.org/download/">CDT Downloads page</a>.</p>

<p>If you already have Eclipse installed you can go to <em>Help &gt; Install New Software…</em> and enter the p2 repository URL for your version of eclipse found on the CDT downloads page. Then check the <em>Main Features</em> box, click <em>Next</em> twice, accept the User Agreement, and restart Eclipse.</p>

<blockquote>
  <p><strong>Important!</strong> When you first open Eclipse, you will be asked to choose a location for your workspace. Make sure to choose a location that is not inside the source directory of your project!</p>
</blockquote>

<h2 id="create-an-eclipse-project-for-revbayes">Create an Eclipse project for RevBayes</h2>
<p>Assuming you have cloned the RevBayes github repository into the directory <code class="highlighter-rouge">&lt;revbayes-repo&gt;</code>, you can create a new C++ Eclipse project as follows:</p>

<ol>
  <li>In Eclipse, go to <em>File &gt; New &gt; Makefile Project with Existing Code</em></li>
  <li>Set the <em>Name</em> of the project to <code class="highlighter-rouge">revbayes</code></li>
  <li>Select <code class="highlighter-rouge">&lt;revbayes-repo&gt;/src</code> as the <em>Existing Code Location</em></li>
  <li>Select <code class="highlighter-rouge">Cross GCC</code> in <em>Toolchain for Indexer Settings</em> (you can change this later if you want).</li>
  <li>Click Finish</li>
</ol>

<h2 id="configure-the-revbayes-project">Configure the RevBayes project</h2>
<p>You will need to configure your Eclipse project so it correctly compiles the revbayes CMake project.</p>

<h3 id="configure-the-path-environment-variable">Configure the PATH environment variable</h3>
<p>If you installed the CMake command line tools in the default location <code class="highlighter-rouge">/usr/local/bin</code>, you must add it to the PATH environment variable of your Eclipse project.</p>

<ol>
  <li>
    <p>In the <em>Project Explorer</em> view, highlight your revbayes project directory
<img src="images/eclipse-explorer.png" width="50%" /></p>
  </li>
  <li>Go to <em>Project &gt; Properties</em>, or right click on the project name and select <em>Properties</em>.</li>
  <li>Expand <em>C/C++ Build</em> and click on <em>Environment</em></li>
  <li>Click on the PATH entry, click <em>Edit…</em> and add <code class="highlighter-rouge">/usr/local/bin</code> to the end of the <em>Value</em>
<img src="images/eclipse-path.png" alt="eclipse-path" title="PATH Configuration" /></li>
</ol>

<h3 id="configure-the-cc-build-settings">Configure the C/C++ build settings</h3>
<p>The RevBayes CMake project uses a special build script <code class="highlighter-rouge">build.sh</code> to build the RevBayes executable. You must tell your Eclipse project to use this script as a build command.</p>

<ol>
  <li>Click on <em>C/C++ Build</em></li>
  <li>Uncheck <em>Use default build command</em> and in <em>Build command</em>, enter <code class="highlighter-rouge">sh build.sh</code></li>
  <li>In <em>Build directory</em>, add <code class="highlighter-rouge">../projects/cmake</code> to the directory path
<img src="images/eclipse-build.png" alt="eclipse-build" title="C/C++ Build Configuration" /></li>
  <li>Click on the <em>Behavior</em> tab</li>
  <li>In <em>Build (incremental build)</em>, enter <code class="highlighter-rouge">-boost false</code>
<img src="images/eclipse-behavior.png" alt="eclipse-behavior" title="C/C++ Build Behavior" /></li>
  <li>Again, click on <em>C/C++ Build</em></li>
  <li>Click <em>Manage Configurations</em></li>
  <li>Click on <em>New…</em> to create a new configuration, and name it <em>Debug</em>
<img src="images/eclipse-config.png" width="75%" /></li>
  <li>
    <p>Configure the Debug configuration by adding <code class="highlighter-rouge">-debug true</code> to the <em>Build (incremental build)</em> options
<img src="images/eclipse-debug.png" alt="eclipse-debug" title="C/C++ Debug Configuration" />
Now, if you set the active configuration to <em>Debug</em>, RevBayes will be compiled with debugger symbols that can be loaded by <code class="highlighter-rouge">lldb</code> or <code class="highlighter-rouge">gdb</code>. You can also set the active build configuration by going to <em>Project &gt; Build Configurations &gt; Set Active</em></p>
  </li>
  <li>Click <em>Apply and Close</em></li>
</ol>

<p>At this point, C/C++ Indexer will get to work indexing the RevBayes code, during which time Eclipse might appear to be unresponsive.</p>

<h3 id="configure-the-project-to-use-spaces-instead-of-tabs">Configure the project to use spaces instead of tabs</h3>

<p>RevBayes code is indented using spaces. However, by default Eclipse uses tabs. Configure your project to automatically insert 4 spaces when you press the Tab key.</p>

<ol>
  <li>Open <em>Eclipse &gt; Preferences</em></li>
  <li>Expand <em>C/C++ &gt; Code Style</em></li>
  <li>Click on <em>Formatter</em></li>
  <li>Click the <em>New…</em> button to create a new profile, name the profile (e.g. <em>“spaces”</em>) then click <em>OK</em> to continue</li>
  <li>Click the <em>Indentation</em> tab</li>
  <li>Under <em>General Settings</em> set <em>Tab Policy</em> to <code class="highlighter-rouge">Spaces only</code></li>
  <li>Click <em>OK</em> and <em>Apply and Close</em></li>
</ol>

<h2 id="build-the-revbayes-project">Build the RevBayes project</h2>
<p>The first time you build RevBayes, you will also need to build the included Boost libraries. You only need to do this once. To build the boost libraries, return to step 5 in the <a href="#configure-the-cc-build-settings">build configuration section</a> and enter <code class="highlighter-rouge">-boost true</code> instead. Then after you’ve built the libraries, you can disable the Boost build flag by resetting <code class="highlighter-rouge">-boost false</code>.</p>

<p>With all the build settings correctly configured, you can build RevBayes by highlighting the project in the <em>Project Explorer</em> view, and then going to <em>Project &gt; Build Project</em>. You can also right click on the project directory and select <em>Build Project</em>.</p>

<p>The <em>Console</em> view should display the progress of the compilation process.</p>

<p>You’re done! Now you can find the <code class="highlighter-rouge">rb</code> executable in the <code class="highlighter-rouge">&lt;revbayes-repo&gt;/projects/cmake</code> directory.</p>

<h2 id="tips">Tips</h2>
<ul>
  <li>
    <p>Create a symlink of <code class="highlighter-rouge">rb</code> in your PATH, so it is automatically updated every time you build RevBayes. e.g.</p>

    <p><code class="highlighter-rouge">sudo ln -s &lt;revbayes-repo&gt;/projects/cmake/rb /usr/local/bin/rb</code></p>
  </li>
  <li>
    <p>If your <em>Project Explorer</em> or <em>Console</em> views disappear and you can’t find them, go to <em>Window &gt; Show View</em> to display various views.</p>
  </li>
  <li>
    <p><strong>add info about using a standard text editor instead</strong></p>
  </li>
</ul>

<h1 class="section" id="setting-up-xcode-for-revbayes-development">Setting up Xcode for RevBayes development</h1>
<hr />

<p>XCode is an IDE for Mac OSX. XCode does not keep track of files, so each time you open your RevBayes project in XCode you must pull revbayes-master from git &amp; remove reference to all of the source. Eclipse Oxygen does a cleaner job of managing the files; you do not need to pull from git each time you work in it.</p>

<h2 id="set-up-the-xcode-project">Set up the XCode Project</h2>
<ol>
  <li>Open Xcode and in the <em>Welcome to Xcode</em> window, choose <strong>Create a new Xcode project</strong>.</li>
  <li>Select <strong>Command Line Tool</strong> and name it <code class="highlighter-rouge">rb</code> and click <strong>Next</strong>. <img src="images/making_xcode_project.png" alt="" /></li>
  <li>Click <strong>New Folder</strong>  to create an empty directory and name it whatever you’d like.</li>
  <li>Click <strong>Create</strong>.</li>
  <li>Delete all of the files and folders in each of the directories including <code class="highlighter-rouge">main.cpp</code> so that RevBayes is empty. You can do this by selecting the folders and files, right clicking and selecting delete. When asked, choose <strong>Move to Trash</strong>.</li>
  <li>Add the source files by selecting the appropriate directory and going to the <strong>File</strong> pull-down menu and selecting <strong>Add Files to rb</strong>.</li>
  <li>Click on <strong>Options</strong> at the button of the window, and under the <strong><em>Added Folders</em></strong> heading, select the <strong>Create Groups</strong> radio button.
    * Select the 
    	* <code class="highlighter-rouge">revbayes/src/revlanguage</code>
    	* <code class="highlighter-rouge">revbayes/src/core</code>
    	* <code class="highlighter-rouge">revbayes/src/libs</code>
    * directories and click <strong>Add</strong>.
    <img src="images/adding_files.png" alt="" />
    * <em>Note:</em> On some versions of XCode, you may need to click on the “Options” Tab, and choose “Create Groups” for the import to work properly. This is the default behavior on most XCode installs.</li>
  <li>Add the boost library to your Xcode project 
    * Select the RevBayes project and go to the <strong>Build Settings</strong>. 
    * Search for or Scroll down to the <strong>Search Paths</strong> heading and find the sub-heading named <strong>Header Search Paths</strong>.
    * Double click the heading, click the <strong>+</strong>, and add the value: <strong>&lt;path to revbayes repository&gt;/revbayes/boost_1_60_0</strong>. 
    	* <code class="highlighter-rouge">&lt;path to revbayes repository&gt;</code> = the location of the revbayes repository on your machine.
  <img src="images/finding_boost.png" alt="" /></li>
</ol>

<h2 id="add-the-revbayes-preprocessor-macro-to-your-xcode-project">Add the RevBayes Preprocessor Macro to your Xcode project</h2>
<ol>
  <li>Select the RevBayes project and go to the <strong>Build Settings</strong>.</li>
  <li>Search for or Scroll down to the <strong>Apple LLVM X.X - Preprocessing</strong> heading and find the sub-heading named <strong>Preprocessor Macros</strong>.</li>
  <li>Double click on right hand column, click on the <strong>+</strong> and enter <code class="highlighter-rouge">RB_XCODE</code>. Do not replace the debug flag that is already present.
    <img src="images/macro.png" alt="" /></li>
</ol>

<h2 id="check-c-language-options">Check C++ language options</h2>
<ol>
  <li>Select the RevBayes project and go to the <strong>Build Settings</strong>.</li>
  <li>Search or scroll to: **Apple LLVM X.X - C++ - Language **.</li>
  <li>Make sure C++ Language Dialect is set to <strong><em>Gnu++ 98</em></strong>.</li>
  <li>Make sure C++ Standard Library is set to <strong><em>libstdc++(Gnu C++)</em></strong>
    <img src="images/cpp_lang_options.png" alt="" /></li>
</ol>

<p>At this point, if everything has been setup correctly, you should be able to build the project. You can try by clicking on <strong>Product - Build</strong> or by using <strong>⌘+B</strong>.</p>

<h1 class="section" id="setting-up-netbeans-for-revbayes-development">Setting up Netbeans for RevBayes Development</h1>

<p>Conventions: File paths are relative to the repository root.</p>

<h2 id="preparations">Preparations</h2>
<p>Make sure you have Java (JRE) on your system: if the command</p>
<div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>which java
</code></pre></div></div>

<p>responds with a file path, like /usr/bin/java, then you’re fine, otherwise browse to the <a href="http://java.com/en/download/">java download page</a> and download the JRE.</p>

<p>Now, browse to <a href="https://netbeans.org/downloads/">netbeans download page</a> and download the C++ or “All” bundled Netbeans distribution. Navigate to the downloaded file in a terminal and run “chmod +x &lt;netbeans-script&gt;” then ./&lt;netbeans-script&gt; to install. Note, the “All” bundle will probably require JDK (Java Development Kit) to be installed on your computer, <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">download jdk</a>.</p>

<p>By default Netbeans has quite limited memory available and you probably want to increase it to make things run faster:</p>

<ol>
  <li>Open the configuration file, &lt;your home folder&gt;/netbeans-&lt;version&gt;/etc/netbeans.conf in a text editor. On a MacIntosh, the path is likely to be /Applications/NetBeans/NetBeans\ &lt;version&gt;.app/Contents/Resources/NetBeans/etc/netbeans.conf.</li>
  <li>Prepend the settings to the default_options so that line will look like this: “netbeans_default_options=”-J-Xmx2g -J-XX:+UseConcMarkSweepGC &lt;other settings&gt;”.</li>
</ol>

<p>The Netbeans project described here will use the Makefile generated by the CMake script /projects/cmake/regenerate.sh. Before setting up our project it is conventient to have all the files needed in place so let’s start with running these commands in a terminal:</p>

<div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd  &lt;path-to-revbayes&gt;/revbayes/projects/cmake 
./regenerate 
cmake . -DCMAKE_BUILD_TYPE=debugfull 
make -j 4 (4 = the number of processors on your computer) 
</code></pre></div></div>

<h2 id="netbeans-setup">Netbeans setup</h2>
<ol>
  <li>
    <p>In Netbeans, Press CTRL+shift+n to start the new project wizard. Select category C++ and project C++ project with existing sources and move to next step.</p>
  </li>
  <li>
    <p>In this step, select the git root directory as source folder, and tick the “custom” mode.</p>
  </li>
  <li>
    <p>Select the Makefile to use</p>
  </li>
  <li>
    <p>Configure build settings. Alternatively you can set “build command” = “${MAKE} -j 4” and “build result” pointing to the “rb” executable.</p>
  </li>
  <li>
    <p>Code assistance can be slow if choosing all files, so narrow it down by ticking “Custom” and append “/src” to the path suggested by Netbeans.</p>
  </li>
  <li>
    <p>That’s it, finish the wizard and compile your code by pressing the F11 key.</p>
  </li>
</ol>

<p>Here are some handy keyboard shortcuts to start with:</p>

<ul>
  <li>Ctrl+click, navigate to definition</li>
  <li>Alt+←, go back where you where before Ctrl+click</li>
  <li>Ctrl+r, refactor code</li>
  <li>Alt+shift+f, format code</li>
  <li>Ctrl+shift+c, comment/comment out code</li>
</ul>

<p>On <a href="http://wiki.netbeans.org/Keyboard_Shortcuts">Netbeans wiki</a> you can download the full map for keyboard shortcuts. Happy coding!</p>


<ol class="bibliography"></ol>

<script type="text/javascript">
var _ol = document.querySelectorAll('ol');
for (var i = 0, elem_ol; elem_ol = _ol[i]; i++) {
	if ( elem_ol.classList == "bibliography" ) {
		var _li = elem_ol.getElementsByTagName("li");
		//for (var j = 0, elem_li; elem_li = _li[j]; j++)
		//{
		//	elem_li.innerHTML = elem_li.innerHTML.replace(/(https?:\/\/)([^\s<]+)/,"<a href=\"$1$2\">$2");
		//}
		if(_li.length > 0)
			elem_ol.outerHTML = "<h2>References</h2>"+elem_ol.outerHTML
	}
}
</script>


<footer>
  <div class="container">
  <div class="row">
    <div class="col-sm-3" align="left">
      <h5>
	     <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />All content on this site is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
      </h5>
    </div>
    <div class="col-md-9" align="right">
      <a href="https://groups.google.com/forum/#!forum/revbayes-users"><img class="navbar-logo" src="/revbayes_tutorials/assets/img/forum.png" />Users' Forum</a>
    </div>
    <!-- <div class="col-md-9" align="right">
      <h5>
	<a href="<USERNAME>/<PROJECT>">Source</a>
	/
	<a href="mailto:willpett@iastate.edu">Contact</a>
      </h5>
    </div> -->
  </div>
  </div>
</footer>

    </div>
    <script src="/revbayes_tutorials/assets/js/jquery.min.js"></script>
<script src="/revbayes_tutorials/assets/js/FileSaver.min.js"></script>
<script src="/revbayes_tutorials/assets/js/jszip.min.js"></script>
<script src="/revbayes_tutorials/assets/js/bootstrap.min.js"></script>
<script src="/revbayes_tutorials/assets/js/lesson.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-37305346-2', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
<script type="text/javascript"
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    }
  });
</script>
